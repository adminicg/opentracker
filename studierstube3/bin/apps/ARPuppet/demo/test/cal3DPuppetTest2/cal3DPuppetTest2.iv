#Inventor V2.1 ascii

DEF CAL3DACTORTEST1 SoApplicationKit {

    info Info {}

    appGeom Separator {
    }

    contextKit SoContextKit {

        clonePipSheet  FALSE

        templatePipSheet Separator {

        } # end of templatePipSheet

        windowGroup Group {

            SoClassLoader {
                className   "SoChoreographerKit"
                fileName    "../apps/arpuppet/characters/arpuppet"
            }
            SoClassLoader {
                className   "SoCal3DPuppeteer"
                fileName    "../apps/arpuppet/characters/cal3dpuppet/cal3dpuppet"
            }
            SoClassLoader {
                className "SoPucServer" 
                fileName  "PUCd"
            }

            SoWindowKit {
                state MAXIMIZED
                clientVolume Separator {
                    renderCaching OFF
                    boundingBoxCaching  OFF
                    renderCulling OFF
                    pickCulling OFF
                    
                    DEF SCENE_ROOT Separator {
                        renderCaching OFF
                        boundingBoxCaching  OFF
                        renderCulling OFF
                        pickCulling OFF
        
                        SoPucServer {
                            serverName "Stb+Cal3D+PUC Demo"
                            devices NodeKitListPart { 
                                containerNode Group {
                                    DEF CONTROLDEVICE SoPucDevice {
                                        deviceName "Cal3DControlDevice"
                                        groups NodeKitListPart { 
                                            containerNode Group {
                                                DEF MAINGROUP SoPucGroup {
                                                    labels ["main group"]
                                                    priority 10
                                                    members NodeKitListPart { 
                                                        containerNode Group {
                                                            DEF SELECTGROUP SoPucStateEnumerated {
                                                                valueLabels ["character","animation"]
                                                                value 0
                                                                priority 10
                                                                labels ["select group"]
                                                            }
                                                            DEF CHARACTERGROUP SoPucGroup {
                                                                labels ["character group"]
                                                                priority 10
                                                                activeIf SoPucActiveIfNode {
                                                                    activeIf SoPucActiveIfClause { 
                                                                        state "SELECTGROUP" 
                                                                        op EQUALS 
                                                                        value "1" 
                                                                    }
                                                                }
                                                                members NodeKitListPart { 
                                                                    containerNode Group {
                                                                        DEF CHARACTER SoPucStateEnumerated {
                                                                            valueLabels ["cally.cfg", "skeleton.cfg", "paladin.cfg"]
                                                                            value 1
                                                                            priority 5
                                                                            labels ["character name"]
                                                                        }
                                                                        DEF VISIBLE SoPucStateBool {
                                                                            labels ["visible"]
                                                                            value 1
                                                                        }
                                                                        DEF SKELETON SoPucStateBool {
                                                                            labels ["skeleton"]
                                                                            value 0
                                                                        }
                                                                        DEF MESH SoPucStateBool {
                                                                            labels ["mesh"]
                                                                            value 1
                                                                        }
                                                                        DEF WIREFRAME SoPucStateBool {
                                                                            labels ["wireframe"]
                                                                            value 0
                                                                        }
                                                                        DEF ANIMATE SoPucStateBool {
                                                                            labels ["animate"]
                                                                            value 1
                                                                        }
                                                                        DEF LOD SoPucStateInt { 
                                                                            min 0 
                                                                            max 100 
                                                                            value 100
                                                                            incr 10 
                                                                            priority 5 
                                                                            labels ["level of detail"]
                                                                        }
                                                                    } 
                                                                } 
                                                            } # SoPucGroup "character group"
                                                            DEF ANIMATIONGROUP SoPucGroup {
                                                                labels ["animation group"]
                                                                priority 8
                                                                activeIf SoPucActiveIfNode {
                                                                    activeIf SoPucActiveIfClause { 
                                                                        state "SELECTGROUP" 
                                                                        op EQUALS 
                                                                        value "2" 
                                                                    }
                                                                }
                                                                members NodeKitListPart { 
                                                                    containerNode Group {
                                                                        DEF ANIMATION SoPucStateEnumerated {
                                                                            valueLabels ["idle","walk","jog","strut","shoot_arrow","tornado_kick","hiphop","sneak"]
                                                                            value 1
                                                                            priority 5
                                                                            labels ["state"]
                                                                        }
                                                                        DEF MOTIONBLEND0 SoPucStateFixed { 
                                                                            min 0 
                                                                            max 1.0 
                                                                            value 0.0
                                                                            incr 0.1
                                                                            priority 5 
                                                                            labels ["idle"]
                                                                        }
                                                                        DEF MOTIONBLEND1 SoPucStateFixed { 
                                                                            min 0 
                                                                            max 1.0 
                                                                            value 0.0
                                                                            incr 0.1
                                                                            priority 5 
                                                                            labels ["walk"]
                                                                        }
                                                                        DEF MOTIONBLEND2 SoPucStateFixed { 
                                                                            min 0 
                                                                            max 1.0 
                                                                            value 0.0
                                                                            incr 0.1
                                                                            priority 5 
                                                                            labels ["jog"]
                                                                        }
                                                                        DEF MOTIONBLEND3 SoPucStateFixed { 
                                                                            min 0 
                                                                            max 1.0 
                                                                            value 0.0
                                                                            incr 0.1
                                                                            priority 5 
                                                                            labels ["strut"]
                                                                        }
                                                                        DEF MOTIONBLEND4 SoPucStateFixed { 
                                                                            min 0 
                                                                            max 1.0 
                                                                            value 0.0
                                                                            incr 0.1
                                                                            priority 5 
                                                                            labels ["wave"]
                                                                        }
                                                                    }
                                                                } 
                                                            } # SoPucGroup "animation group"
                                                        }
                                                    }
                                                } # SoPucGroup "main group"
                                            } 
                                        } 
                                    } # SoPucDevice
                                }
                            }
                        } # SoPucServer
                
                        SoTransform { translation 0 0.02 0 }
                        DEF PUPPETEER1 SoCal3DPuppeteer{
                            id "myCal3DPuppeteer"
                            controlMode [ STATION, STATION ]
                            station 1
                            showPuppeteer TRUE
                            whichPuppets [ -3 ]
                            puppets SoDragKit {
                                content Separator {
                                    SoMultiSwitch {
                                        DEF PUPPET1 SoCal3DPuppet{
                                            pathName "../apps/arpuppet/characters/cal3DPuppet/data"
                                            fileName "cally.cfg" = SoSelectOne {
                                                type SoMFString
                                                input ["cally.cfg","skeleton.cfg","paladin.cfg"]
                                                index 1 = USE CHARACTER.value
                                            }.output
                                            lod 100 = USE LOD.value
                                            visible TRUE = USE  VISIBLE.value
                                            animate TRUE = USE  ANIMATE.value
                                            skeleton FALSE = USE  SKELETON.value
                                            wireframe FALSE = USE  WIREFRAME.value
                                            mesh TRUE = USE  MESH.value
                                            state "cally_jog" = SoStringCalculator {
                                                a "cally_" = SoSelectOne {
                                                    type SoMFString
                                                    input ["cally_", "skeleton_", "paladin_" ]
                                                    index 1 = USE  CHARACTER.value
                                                }.output
                                                b "idle" = SoSelectOne {
                                                    type SoMFString
                                                    input ["idle","walk","jog","strut","shoot_arrow","tornado_kick","hiphop","sneak"]
                                                    index 1 = USE  ANIMATION.value
                                                }.output
                                                expression "oa=a+b"
                                            }.oa
                                            blendName = SoStringCalculator {
                                                a "cally_" = SoSelectOne {
                                                    type SoMFString
                                                    input ["cally_", "skeleton_", "paladin_" ]
                                                    index 1 = USE  CHARACTER.value
                                                }.output
                                                b ["idle","walk","jog","strut","wave"]
                                                expression "oa=a+b"
                                            }.oa
                                            blend [1,0,0,0,0] = SoConcatenate {
                                                type SoMFFloat
                                                input0 = USE  MOTIONBLEND0.value
                                                input1 = USE  MOTIONBLEND1.value
                                                input2 = USE  MOTIONBLEND2.value
                                                input3 = USE  MOTIONBLEND3.value
                                                input4 = USE  MOTIONBLEND4.value
                                            }.output
                                            delayIn 0.4
                                            delayOut 0.4
                                        } # end of SoCal3DPuppet
                                    } # end of puppets
                                }
                            }
                        } # end of SoCal3DPuppeteer
                    }
                                        
                } # end of clientVolume
                
            } # end of windowKit

        } # end of windowGroup

    } # end of contextKit

} # end of applicationKit
