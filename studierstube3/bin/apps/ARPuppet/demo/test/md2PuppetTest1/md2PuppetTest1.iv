#Inventor V2.1 ascii

DEF MD2PUPPETEERTEST1 SoApplicationKit {

    info Info {}

    appGeom Separator {
    }

    contextKit SoContextKit {

        clonePipSheet  FALSE

        templatePipSheet Separator {

            Separator {
                RotationXYZ {axis  X angle 1.57 }
                Material { diffuseColor 1 0 0 }
                DEF BUTTON_CMD SoToggleButton { 
                    width 1 depth 1 height 0.4
                }
            }

        } # end of templatePipSheet

        windowGroup Group {

            SoClassLoader {
                className   "SoChoreographerKit"
                fileName    "../apps/arpuppet/characters/arpuppet"
            }
            SoClassLoader {
                className   "SoMD2Puppeteer"
                fileName    "../apps/arpuppet/characters/md2Puppet/md2Puppet"
            }
            SoClassLoader {
                className   "SoFMODSound"
                fileName    "FMODSound"
            }

            SoWindowKit {
                state MAXIMIZED
                clientVolume Separator {

                    DEF MD2PUPPETEER SoMD2Puppeteer{
                        id "md2"
                        controlMode [ (STATION | DRAG), STATION ]
                        station 3
                        showPuppeteer TRUE
                        showAttributes FALSE
                        whichPuppets [ 0 ]
                        whichAttributes [ 0 ]
                        dataNeedsValidation TRUE
                        dataValid = USE BUTTON_CMD.on
                        boundingBoxOn TRUE
                        highlightDragOn TRUE
                        viewingFrustumOn TRUE
                        velocityVisOn TRUE
                        bbMaterial SoMaterial {
                            emissiveColor 1 1 0
                            diffuseColor 1 1 0 
                            ambientColor 1 1 0 
                        }
                        bbDrawStyle SoDrawStyle { style LINES }
                        vfMaterial SoMaterial {
                            emissiveColor 1 0 1
                            diffuseColor 1 0 1
                            ambientColor 1 0 1
                        }
                        vfDrawStyle SoDrawStyle { style LINES } 
                        viewingFrustums SoNodeKitListPart {
                            containerNode Separator {
                                SoViewingFrustum {
                                    positionOffset 0.0 0.05 0.0
                                    nearDistance 0.02
                                    farDistance 0.9
                                    heightAngle 0.5
                                }
                            }
                        }
                        velocityVis SoStroke {
                            geometry Group {
                                Transform { rotation 0 0 1 -1.57 }
                                Material { diffuseColor 1 0.5 0 emissiveColor 1 0.5 0 }
                                Cylinder { height 1 radius 0.01 }
                                Transform { translation 0 0.5 0 }
                                Cone { bottomRadius 0.02 height 0.111111 }
                            }
                        }                       
                        animationMap [ "idle st 5.0", "run run 1.0", "point point 1.5" ]
                        #animationMap [ "idle 010 3.0", "run 020 1.0", "point 050 1.5" ]
                        #animationMap [ "idle stand0 2.0", "run run0 1.0", "point point1 1.5" ]
                        command [ "pointAt 0.2 0 -0.2 `forward` 2000", "sound `../apps/arpuppet/characters/md2puppet/data/marvin/pain100_2.wav`" ]
                        #command [ "goTo 0.2 0 -0.2 2000", "sound `../apps/arpuppet/characters/md2puppet/data/chastity/gasp1.wav` 1" ]
                        #command [ "goTo 0.2 0 -0.2 2000", "sound `../apps/arpuppet/characters/md2puppet/data/ladydeath/death2.wav` 0" ]
                        puppets SoDragKit {
                            content Separator {
                                SoMultiSwitch {
                                    SoSeparator {
                                        Transform { scaleFactor 1.1 1.1 1.1 }
                                        DEF MD2PUPPET SoMD2NodeKit {
                                            meshname "../apps/arpuppet/characters/md2puppet/data/marvin/marvin.md2"
                                            skinname "../apps/arpuppet/characters/md2puppet/data/marvin/marvin.jpg"
                                            #meshname "../apps/arpuppet/characters/md2puppet/data/chastity/chastity.md2"
                                            #skinname "../apps/arpuppet/characters/md2puppet/data/chastity/chastity.jpg"
                                            #meshname "../apps/arpuppet/characters/md2puppet/data/ladydeath/ladydeath.md2"
                                            #skinname "../apps/arpuppet/characters/md2puppet/data/ladydeath/ladydeath.jpg"
                                            rotation 0 1 0 -1.57
                                        }
                                    }
                                }
                            }
                        } # end of puppets
                        attributes SoMultiSwitch {
                            SoSeparator {
                                SoSeparator {
                                    SoTransform { translation -0.2 0.2 0 scaleFactor 0.003 0.003 0.003 }
                                    SoText3 { 
                                        parts ALL
                                        string = USE MD2PUPPET.animname
                                    }
                                }
                            }
                        } # end of attributes

                    } # end of SoMD2Puppeteer
                    Separator {
                        Material { diffuseColor 1 1 0 }
                        SoTransform { translation 0.2 0 -0.2 }
                        #SoSphere { radius 0.008 }
                    }
                    
                    Separator {
                        Material { diffuseColor 1 0 0 }
                        SoTransform { translation -0.15 -0.15 0 scaleFactor 0.002 0.002 0.002 }
                        SoText3 {
                            parts ALL
                            #string = USE MD2PUPPETEER.boundingBox
                        }
                    }
                    
                    SoFMODSound {
                        filename = USE MD2PUPPETEER.soundFileName
                        play = USE MD2PUPPETEER.soundPlay
                        loop = USE MD2PUPPETEER.soundLoop
                        volume 1.0
                    }

                } # end of clientVolume

            } # end of windowKit

        } # end of windowGroup

    } # end of contextKit

} # end of applicationKit
