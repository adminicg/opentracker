#Inventor V2.1 ascii

DEF CAL3DACTORTEST1 SoApplicationKit {

    info Info {}

    appGeom Separator {
    }

    contextKit SoContextKit {

        clonePipSheet  FALSE

        templatePipSheet Separator {

            Separator {
                RotationXYZ {axis  X angle 1.57 }
                Material { diffuseColor 0 1 0 }
                DEF BUTTON_CHARACTER SoToggleButton { 
                    width 0.5 depth 0.5 height 0.2 on TRUE
                }
                Translation { translation 0.5 0 0 }
                Material { diffuseColor 0 1 0 }
                DEF BUTTON_VISIBLE SoToggleButton { 
                    width 0.5 depth 0.5 height 0.2 on TRUE
                }
                Translation { translation 0.5 0 0 }
                Material { diffuseColor 1 0 0 }
                DEF BUTTON_ANIMATED SoToggleButton { 
                    width 0.5 depth 0.5 height 0.2 on TRUE 
                }
                Translation { translation 0.5 0 0 }
                Material { diffuseColor 1 0 1 }
                DEF BUTTON_SKELETON SoToggleButton { 
                    width 0.5 depth 0.5 height 0.2 on FALSE
                }
                Translation { translation 0.5 0 0 }
                Material { diffuseColor 0 1 1 }
                DEF BUTTON_STATE SoToggleButton { 
                    width 0.5 depth 0.5 height 0.2 on FALSE
                }
            }

        } # end of templatePipSheet

        windowGroup Group {

            SoClassLoader {
                className   "SoChoreographerKit"
                fileName    "../apps/arpuppet/characters/arpuppet"
            }
            SoClassLoader {
                className   "SoCal3DPuppeteer"
                fileName    "../apps/arpuppet/characters/cal3dpuppet/cal3dpuppet"
            }

            SoWindowKit {
                state MAXIMIZED
                clientVolume Separator {
                    SoTrackedArtifactKit {
                        station 3
                        geometry Separator {
                            #Transform { scaleFactor 3.0 3.0 3.0 }
                            Transform { scaleFactor 1.5 1.5 1.5 }
                            DEF CAL3DPUPPET SoCal3DPuppet {
                                pathName "../apps/arpuppet/characters/cal3dpuppet/data"
                                fileName = SoSelectOne {
                                    type SoMFString
                                    index 0 = DEF SELECT_CHARACTER SoVariable { 
                                        type "INT" 
                                        a 3 # number of characters
                                        oa -1
                                        expression "oa=(oa+1)%a"
                                        eval = USE BUTTON_CHARACTER.on
                                    }.oa
                                    input = SoConcatenate {
                                        type SoMFString
                                        input0 "paladin.cfg"
                                        input1 "golem.cfg"
                                        input2 "legomaxl.cfg"
                                    }.output
                                }.output
                                lod 100
                                visible = USE BUTTON_VISIBLE.on
                                animate = USE BUTTON_ANIMATED.on
                                skeleton = USE BUTTON_SKELETON.on
                                wireframe FALSE
                                mesh = DEF TOGGLE_SKELETON SoVariable {
                                    type "BOOL"
                                    a = USE BUTTON_SKELETON.on
                                    expression "oa=!a"
                                    eval = USE BUTTON_SKELETON.on
                                }.oa
                                boneBoundingBoxOn TRUE
                                bbColorIndex [ 0, 0, 0, 1, 0 ]
                                bbDrawStyle SoDrawStyle { style LINES lineWidth 2 }
                                bbMaterial SoMaterial { 
                                    diffuseColor [ 0 0 1, 1 0 0 ]
                                    ambientColor [ 0 0 1, 1 0 0 ]
                                    shininess [ 0 0 ]
                                }
                                #state "paladin_walk" = SoSelectOne {
                                #state "cow_walk" = SoSelectOne {
                                state "legomaxl_walk" = SoSelectOne {
                                    type SoMFString
                                    input = SoConcatenate {
                                        type SoMFString
                                        input0 = SoSelectOne {
                                            type SoMFString
                                            input [ "paladin_walk", "paladin_wave" ]
                                            index = 
                                            DEF SELECT_ANIMATION SoVariable {
                                                type "INT"
                                                oa -1
                                                expression "oa=(oa+1)%2"
                                                eval = USE BUTTON_STATE.on
                                            }.oa
                                        }.output
                                        input1 = SoSelectOne {
                                            type SoMFString
                                            input [ "golem_walk", "golem_happy" ]
                                            index = USE SELECT_ANIMATION.oa
                                        }.output
                                        input2 = SoSelectOne {
                                            type SoMFString
                                            input ["legomaxl_walk", "legomaxl_point_forward"]
                                            index = USE SELECT_ANIMATION.oa
                                        }.output
                                    }.output
                                    index = USE SELECT_CHARACTER.oa
                                }.output
                                delayIn 0.4
                                delayOut 0.4
                            } # end of SoCal3DPuppet
                        } # end of geometry
                    } # end of SoTrackedArtifactKit
                                    
                } # end of clientVolume
                    
            } # end of windowKit
                    
        } # end of windowGroup

    } # end of contextKit

} # end of applicationKit
