#Inventor V2.1 ascii

DEF PUPPETEERTEST1 SoApplicationKit {

    info Info {}

    appGeom Separator {
    }

    contextKit SoContextKit {

        clonePipSheet  FALSE

        templatePipSheet Separator {

            Separator {
                RotationXYZ {axis  X angle 1.57 }
                Material { diffuseColor 0 1 0 }
                DEF BUTTON_TRACKED SoToggleButton { 
                    width 5 depth 5 height 2 on TRUE
                }
                Translation { translation 5 0 0 }
                Material { diffuseColor 1 0 0 }
                DEF BUTTON_CMD SoToggleButton { 
                    width 5 depth 5 height 2 
                }
                Translation { translation 5 0 0 }
                Material { diffuseColor 1 0 1 }
                DEF BUTTON_SHOWPUPPETEER SoToggleButton { 
                    width 5 depth 5 height 2 on TRUE
                }
                Translation { translation 5 0 0 }
                Material { diffuseColor 0 1 1 }
                DEF BUTTON_SHOWATTRIBUTE SoToggleButton { 
                    width 5 depth 5 height 2 on TRUE
                }
                Translation { translation 5 0 0 }
                Material { diffuseColor 0 0 1 }
                DEF BUTTON_SNAP SoToggleButton { 
                    width 5 depth 5 height 2 on TRUE
                }
            }

        } # end of templatePipSheet

        windowGroup Group {

            SoClassLoader {
                className   "SoPuppeteerKit"
                fileName    "../apps/arpuppet/characters/arpuppetd"
            }

            SoWindowKit {
                state MAXIMIZED
                clientVolume Separator {
                       
                    DEF PUPPETEER1 SoPuppeteerKit{
                        id "clown"
                        station 1 
                        controlMode [ ( EXTERNAL | STATION ) , ( EXTERNAL | STATION ) ]
                        positionOffset = SoTrakEngine { station 0 }.translation
                        orientationOffset = SoTrakEngine { station 0 }.rotation
                        puppets SoDragKit {
                            content Separator {
                                SoMultiSwitch {
                                    SoSeparator { # puppet 0
                                        # head
                                        Material { diffuseColor 1 1 0 }
                                        SoSphere { radius 0.05 }
                                        # nose
                                        Separator {
                                            Transform { rotation 1 0 0 1.57 translation 0 0 0.07 }
                                            Material { diffuseColor 1 0 0 }
                                            SoCone { bottomRadius 0.02 height 0.05}
                                        }
                                        # hat
                                        Separator {
                                            Transform { translation 0 0.055 0}
                                            Material { diffuseColor 0 0 1 }
                                            RotationXYZ {
                                                axis Y
                                                angle 0 = 
                                                    DEF TIMER1 ElapsedTime {
                                                        speed 0.5
                                                    }.timeOut
                                            }
                                            SoCube { width 0.04 height 0.04 depth 0.04 }
                                        }
                                        # eyes
                                        Material { diffuseColor 0 1 0 }
                                        Separator { # left
                                            Transform { translation -0.025 0.025 0.035}
                                            SoSphere { radius 0.01 }
                                        }
                                        # right eye
                                        Separator { # right
                                            Transform { translation 0.025 0.025 0.035}
                                            SoSphere { radius 0.01 }
                                        }
                                    }                           
                                } # SoMultiSwitch
                            } # Separator
                        } # end of puppets
                    } # end of SoPuppeteerKit
                    
                    Separator {
                        Material { diffuseColor 0 1 1 }
                        SoTransform { translation -0.2 0.4 0 scaleFactor 0.01 0.01 0.01 }
                        SoText3 {
                            parts ALL
                            string = USE PUPPETEER1.position
                        }
                    }

                } # end of clientVolume

            } # end of windowKit

        } # end of windowGroup

    } # end of contextKit

} # end of applicationKit
