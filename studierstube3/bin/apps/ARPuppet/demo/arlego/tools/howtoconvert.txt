HOW TO POLISH MLCAD-EXPORTED LEGO MODELS FOR USE IN INVENTOR SCRIPTS
--------------------------------------------------------------------
Istvan Barakonyi, October 18, 2004


1.) Save LEGO model part in LDR format in MLCAD

2.) Convert LDR file to Inventor (IV) file using 3DWin5

3.) Open the result IV file in a text editor and do the following

a) Replace the SoInfo node by the following Inventor script:

    Transform { rotation 0 1 0 -1.57 }
    Transform { scaleFactor 0.001 0.001 0.001 rotation 1 0 0 -1.57 }
    
b) Remove all Material nodes unless you explicitly need them in the file (e.g. multiple colors in one tile etc.)

c) If you removed any material nodes, remove all their references (just search for the word "USE" and remove all lines where it is found in a reference)

d) Remove all ShapeHints nodes

e) Remove all Normal nodes, NormalBinding nodes, and all normalIndex fields with their values from IndexedFaceSet nodes (the coordIndex fiels should remain untouched!)

f) Remove all camera and light nodes from the end of the file after the IndexedFaceSet nodes

g) Save and close the text file 

4.) Open the saved IV file in CosmoWorlds, where all normals will be fixed. Do coloring, texture mapping, extra modelling work, new objects etc. if necessary.

5.) Export model into an Inventor (IV) model file

6.) In case you have done texture mapping in CosmoWorlds, open the IV file in a text editor and do the following

a) Search for the Texture2 node and replace it by the following script:
     
     Texture2 {
        filename "mytexturefilename"         # e.g. "../apps/arpuppet/demo/arlego/texture/controlpanel.png" 
	 }
     
b) Remove all Material nodes unless you explicitly need them in the file (e.g. multiple colors in one tile etc.)

c) If you removed any material nodes, remove all their references (just search for the word "USE" and remove all lines where it is found in a reference)

d) Save the file and you are done.
