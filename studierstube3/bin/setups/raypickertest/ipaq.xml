<?xml version="1.0" encoding="UTF-8"?>
<!-- edited with XML Spy v4.0.1 U (http://www.xmlspy.com) by virtualones (Vienna University of Technology) -->
<!--This OpenTracker file describes the configuration for the mobile setup using an iPaq.
It supports the following hardware :
1) Intersense InterTrax2 to track head orientation
2) Firewire Webcam via ARToolkit to track markers on iPaq
3) Button events catched from iPaq and sent via java application over bluetooth to studierstube -->
<!DOCTYPE OpenTracker SYSTEM "..\..\workspace\opentracker.dtd">
<OpenTracker>
  <configuration>
    <ARToolKitConfig camera-parameter="..\mobile\data\firefly_4mm.dat" videomode="0 640 480 vertical" framerate="13" treshhold="140"/>
    <ConsoleConfig headerline="iPAQ RayPicker Test" interval="1" display="off"/>
  </configuration>
  <ConsoleSink comment="test">
    <ConsoleSource number="0"/>
  </ConsoleSink>
  <!-- Pen is a tracked iPAQ -->
  <ConsoleSink comment="Pen" active="on">
    <StbSink station="0" DEF="Pen">
      <Merge>
        <MergeDefault>
          <Selection timeout="10000">
            <Select>
              <ThresholdFilter rotationmax="1" rotationmin="0.1" DEF="PadReference">
                <Filter weight="0.333333 0.333333 0.333333">
                  <EventQueue length="3">
                    <EventVirtualTransform translation="0 0.09 -0.04">
                      <!-- <EventVirtualTransform rotation="0 1 0 0">   glove11.patt -->
                      <EventTransform rotation="1 0 0 0" scale="0.001 0.001 0.001">
                        <ARToolKitSource tag-file="..\mobile\data\pi.tag" center="0 0" size="50" DEF="marker"/>
                      </EventTransform>
                      <!--</EventVirtualTransform> -->
                    </EventVirtualTransform>
                  </EventQueue>
                </Filter>
              </ThresholdFilter>
            </Select>
            <TestSource position="0 0 10"/>
          </Selection>
        </MergeDefault>
        <MergeButton>
          <ButtonOp op="OR">
            <Arg1>
              <ConsoleSink comment="iPAQ networking">
                <NetworkSource number="0" multicast-address="224.100.200.101" port="5556"/>
              </ConsoleSink>
            </Arg1>
            <Arg2>
              <StbKeyboardSource number="0"/>
            </Arg2>
          </ButtonOp>
        </MergeButton>
      </Merge>
    </StbSink>
  </ConsoleSink>
  <!-- Studierstube Source for RayPicker -->
  <ConsoleSink comment="RayPicker">
    <StbSink station="4" event="on">
      <StbSource node="RAYPICK" position="pickedPoint" orientation="pickedOrientation" button="button"/>
    </StbSink>
  </ConsoleSink>
  <!-- PIP -->
  <EventTransform rotation="1 0 0 0" scale="0.001 0.001 0.001" DEF="LAMBDA">
    <ARToolKitSource tag-file="..\mobile\data\lambda.tag" center="0 0" size="80"/>
  </EventTransform>
  <StbSink station="1" DEF="PIP">
    <Selection timeout="3000">
      <Select>
        <Ref USE="LAMBDA"/>
      </Select>
      <!-- get the pip out of the way -->
      <TestSource position="0 0 100"/>
    </Selection>
  </StbSink>
  <!-- PIP pointer -->
  <StbSink station="14" event="on">
    <EventDynamicTransform baseevent="true">
      <TransformBase>
        <Ref USE="PIP"/>
      </TransformBase>
      <EventTransform scale="-0.15 -0.1 0" translation="-0.075 0.05 0.003" rotation="0 1 0 0">
        <StbMouseSource mode="relative"/>
      </EventTransform>
    </EventDynamicTransform>
  </StbSink>
  <!-- output to camera station -->
  <StbSink station="2" DEF="camera">
    <EventVirtualTransform DEF="calibOffsetCam">
      <TestSource frequency="10" position="0 0 0"/>
    </EventVirtualTransform>
  </StbSink>
</OpenTracker>
