*************************************
* CHANGES.TXT                       *
* Changes log for Studierstube code *
*************************************

go to http://www.studierstube.org/ for a detailed log of recent changes.

dieter, 2000-09-06
- added documentation to web site: how to use keyboard tracker, 
  new tracker command line options such as "ttype -k"
- added ww's fix to StbCommunicator: pip visibility can now be explicitely
  set with showPipBody()
- added Gerhard's fix to FlexibleTracker: now the number of reported
  stations is the number set in the constructor
- added Jan's "remulticast" tool: general unicast to multicast forwarder
  need to multicast day from ultratrak
  note: changed name from "ucastmcast" to "remulticast"
- added Gerd's KeyboardTracker, KeyboardTrackerClient|Server  to code
  - changed Tracker,TrackerBuilder,StbWorkspace,SoStudierstubeViewer,
    StbUserData
  - tracker can be emulated with keyboard commands now
  - keyboard tracker makes SoStudierstubeViewer dependent on StbWorkspace
    -> this must be separated if viewer should be independent from Workspace 
dieter, 2000-09-02
- fixed workspace/Makefile - all workspace obj are now in libStbAPI.a
- fixed Makefile of fullview
- added code for Intersense to tracker subsystem:
  - class tracker/TrackerIS
  - subdirectory /extras/intersense with intersense driver for IRIX
  - changed tracker/Makefile
  - added Peter Stephenson's lock class to util
  - changed TrackerBuilder + Parameters
    now there is a new "-ttype i" option for InterSense tracker
  - extended class Tracker with setPosition/Rotation methods
  - added BaseChangeFilter to tracker/ for full coordinate system transformation
  - changed TrackerBuilder to support BaseChangeFilter
    --> new options -mbcf, -bcfx, -bcfy, -bcfz, -bcfa
gerhard reitmayr, 2000-07-18
- small change to StbLineSequentialDisplayMode to make stencil viewing
  finally work
alf, 2000-07-18
- small change to StbFieldSequentialDisplayMode to make it work with
  dual head graphics boards under windows

-----
changes for version 1.99d
-----
dieter, 2000-06-28
- removed transparency from So3DWindowKit again
- added .dsp/.dsw files for Workspace and all demos except objectCalibration
  changed Makefile clobberall target to correctly remove Visual C++ temp files
gerd, 2000-06-28
- changed zpthread to use a shared arena file in /tmp so Workspace can be
  executed independent of user priviledges

-----
changes for version 1.99c
-----
dieter, 2000-06-27
- added new SoContextKit based "spray" applet
- fixed bug in Stb3DEventGenerator: some fields of event object were not
  initialized, which caused a bug with concurrent interaction of 2 users
hannes kaufmann, 2000-06-27
- added include audio.h to sound.h
  IMPORTANT NOTE: to play sound under Win32, you must include the
  winmm.lib into your project (go to project settings->all configurations
  >link->general->object/library modules and enter winmm.lib
dieter+alf, 2000-06-26
- added stencil option to SoStudierstubeViewer (code by alf): now there
  is a choice of stenciling vs. polygon stippling for line sequential mode
  changed StbLineSequentialDisplayMode.h|cxx, ViewerBuilder.h|cxx,
  StbUserData. Added --stencil command line option
  later a fix was added to delay use of stencil buffer under WIN32 for 20
   frames as there is some time required for initialization of graphics
dieter, 2000-06-26
- added osRand() random number function to os.h/cxx
- added class NullTracker, changed TrackerBuilder: new option "-ttype 0"
  allows to work without tracker completely for off-line development
dieter, 2000-06-20
- removed most old-style and experimental apps
- added "Red and Blue" Demo which is also presented in SoContextKit manpage
- beautified and documented SoContextKit code
gerhard reitmayr, 2000-06-16
- modified Tracker.cxx to support Postion+Matrix data from video tracker

-----
changes for version 1.99b
-----
clemens pecinowsky, 2000-06-15
- added AVS-Interface 2.0 (final diploma thesis results)
  Necessary Changes:
  Grund der Aenderung (Bei Typ A)--------------------------|
  Type der Aenderung (A Aenderung, N Neu)---------|        |
  Datei/Verzeichnis der Aenderung---------|       |        | 
                                          |       |        | 
  /studierstube/src/stbapi/util/ivutil.cxx   	  A  InitClass von SoStreamline
  /studierstube/src/stbapi/misc/Makefile	  A  SoStreamline.h & .cxx
  /studierstube/src/stbapi/misc/SoStreamLine.h	  N
  /studierstube/src/stbapi/misc/SoStreamLine.cxx  N
  /studierstube/documentation/
  /studierstube/src/Makefile                      A  avsdisplay App
  /studierstube/src/apps/avsdisplay/*          	  N
  /studierstube/bin/apps/avsdisplay/*      	  N
  /studierstube/tools/avstool/*               	  N
  was noch dazugekommen ist:
  die Workspace Projektfiles fuers NT,
  im /studierstube/src/stbapi/util Verzeichnis die container und zpthread
  muessen die funktionen und die klassen das STBAPI_API define im .h file 
  besitzen.
rainer splechtna, 2000-06-15
- viewer: 
  fixed 'seek'-function of viewer; popupMenue is now enabled by default
  for DesktopControlMode; some other minor changes; 
  files modified:
  * SoStereoCameraKit.cxx: changed getCamera methods
  * SoOffAxisCamera.*: added rayPick method override
  * StbMonoDisplayMode.cxx: changed some viewer settings
  * StbDesktopControlMode.cxx: added near and far distance to examiner cam
  * SoStudierstubeViewer.cxx: added popupMenue, autoClipping override
  * ViewerBuilder.cxx: removed setDecoration(FALSE) if videoOverlay mode 
- tracker: 
  added methods for getting virtual offsets (for calibration application)
  files modified:
  * TrackerBuilder.*: added isVirtualOffsetFilter(), added getVirtualXXX()
  * VirtualOffsetFilter.*: added getVirtualXXX()
- calibration:
  * calibration.cxx:
  uses new getVirtual methods, marker-offset file not mandatory, fixed 'starting
  with second marker' problem, changed 'test calibration', added automatic
  sampling method detection (relativeSampling - flag)
  * new file testPen.iv
  * modified file markerNear.iv
  * modified file markerTest.iv
dieter, 2000-06-15
- changed startmono to use head light and mono camera
- moved simpleview, tview to tools/obsolete since they are outdated
dieter, 2000-06-14
- moved session manager (sman) to tools/sman
  moved buffer and socket modules to util
  removed network directory
- moved container class from DIV to util directory, adjusted Makefiles
- changed animal demo to inherit from SoContextKit
- moved -D STB_DISTRIBUTED from stbapi.h to Makefile.include to make it
  an official user-defined compilation feature
dieter, 2000-05-16
- added bugfix (initialize startMotionMatrix) to So3DDragger.cxx
- changed options to allow any user to have rendering or not
  rendering. added -norendering[234] flags to cmd line, removed 
  -singledisplay flag.

-----
dieter+gerd, 2000-05-25 - changes for version 1.99a (aka pre199)
-----
- various modifications to Storyboarding, Workspace, Window kit
  to make Storyboarding app run distributed (no exact notes taken)
- SoStudierstubeViewer: added video textures

-----
gerd, 2000-05-04 - changes for version 1.32a
-----
- modified SoMyContextKit.h to perform correct dll linkage
- modified StbAppManager.cxx and StbWorkspace.* to enable distribution via div
- modified StbMsgManager.* and windef.h to allow program registration
- modified SoBorderKit.cxx to allow copy operation
- added div directory
- added network directory
- added project files for WIN32
- added workspace/distrManager directory

-----
dieter, 2000-05-04 - changes for version 1.32
-----
- Storyboarding application based on "Studierstube foundation class"
  finally working (although not quite with Distributed Studierstube)
  Released as version 1.32 (although frequent updates will follow!)
- fixed too frequent field updates in SoWindowKit::setVisisble()
  and SoMoveKit::setFocus()
- SoDragKit: added fields translationOn/rotationOn and introduced "base"
  Separator part -> enclosing separator for a drag kit no longer needed
- added OnScreenRenderer utility (alf) to misc/ dir
- SoContextKit::initClass now called in ContextManager constructor.
  therefore ContextManager and SoContextKit need not be part of StbAPI lib.
  (eg fullview can be compiled without context stuff)
- fixed problem (under windows): must release h3a grabbers before switching
  to new pip sheet so grabber does not point to stale sheet (dieter+gerd)
  added Stb3DEventGenerator::releaseAllGrabbers and called it from
  SoContextKit::focusChange
- fixed bug: sometimes focus not explicitely changed to last context
  SoContextKit fixed 
- fixed bug: changed Stb_getMessage and ContextManager::getMessage
  to handle CONTEXTKIT_FOCUSCHANGE and correctly deal with app callback
- changed SoContextKit to allow compilation under windows according
  to gerds requests, especially: introduced delayed focus change so that
  focus change to new context does not happen within SoHandle3DEventAction
- added uid parameter to SoContextKit::createPipGeometry
  --> for Hannes Kaufmann's teacher-student scenario
- made windows semi-transparent for better look - SoBaseKit.cxx
- added setSearchingChildren(TRUE) to SoContextKit
- added synchronous global tracker field updates from Alf
  affected files Stb3DEventGenerator.h|cxx, SoStudierstubeViewer.cxx,
  StbWorkspace.cxx. Framerate now 50%-100% higher :>
- added SoDragKit to interaction - (c) Gerhard Reitmayr & Dieter Schmalstieg :)
- changed start file to reflect new tracker origin in VRLab Vienna
- added comments to Makefile.include
- bugfix - added SoMultMatrix::initClass to initStbClass()
- quick fix for exit button on pip sheet -> calls exit(0)
- added "container" class (hash table) to util
- fixed bug in SoWindowKit: focus management (blue window frames)
  now uses peci's SoUserContextElement and actually works for multiple users
- added win32 compilable versions of SoStudierstubeViewer and WStudierstube
  (courtesy Gerd)
- added tools/videomode - glasstron video mode tool by Gerd Hesina
- fixed bug in StationState c'tor as reported by Pedro
- added sound() utility from Hannes to util
- added modelviewer applet to view simple geometry files
  could replace "helloWorld"
- updated startup files for projection wall @ vrc
- modified StbWorkspace::mainLoop to call SoXt::mainLoop()
  results in a twofold speedup!
- added some comments to TrackerBuilder.h

-----
dieter, 2000-03-24 - changes for version 1.31
-----
(done at crcg march 2000)
- added --serialbaudrate flag to trackerserver
- created tracker.init.crcg
- created startvtcrcg
- created crcg.fsp from old sample data file
- created VTCameraCRCG.iv, VTCamKitCRCG.iv
- fixed bug for source mode in VirtualOffsetFilter.cxx
- fixed bug (?) in TrackerBuilder.cxx -> makeSourceOffsetFilter was not used!
- changed default window frame thickness to 0.015 to make picking easier
  --> changed helloWorld and spraying demo now use this default
- added bugfixed version of So3DDragger (from Alf) - finally the "don't move
  with pressed button into window bug" has gone away
- added -time flag to fullview to control benchmarking output
- created application loader applet in apps/loader/
- added AGETCHILD macro to ivmacros.iv

-----
dieter, 2000-02-15 - changes for version 1.30 (aka 1.3rc1)
-----
- added latest trackerserver to tools/trackerserver
- changed util/Makefile.linux to include stbapi/ dir
- changed wrong target on several apps Makefiles 
- bugfix: added 3dsensor/3dseparator, dragsep, cubeseamkit, clipcube init 
  to util/ivutil.cxx
- cubeseamkit: inlined .iv files required for building kit
- added support for inactive trackers (for UltraTrak)
  changed files UltraTrak.cxx, Tracker.cxx, UndistortionFilter.cxx
- removed obsolete function headers from StbWorkspace:
  initStereoRenderAreas,  initMonoRenderAreas, initDesktopViewer
- changed type of viewer in StbUserData from SoXtViewer to (more accurate)
  SoStudierstubeViewer
- fixed problem in roentgen demo: seams only work with checkVisibility=FALSE
  changed apps/roentgen/pen.iv accordingly
- added viskas demo (does not work 100%)
- added WStudierstube adapter aux class for 1.1 compatibility
- added fullview to tool/ dir - simple non-workspace tracked stereo viewer
- updated new viewer classes from rainer splechtna 2000-02-24
- added headlight field to StbUserData
- added scaleFactor to VirtualOffsetFilter and TrackerBuilder
- added shell scripts to run Workspace on VR-Center's power wall:
  startpw and startpw2u (for 2 users), PWCamera.iv - powerwall camera
- add singledisplay flag to StbWorkspace to support 2 user interaction
  with single power wall
- removed obsolete setmon command from StbResManager.cxx (reset to 72Hz)
- added simplehelloworld mini demo applet
- added exit() to UndistortionFilter if filter file not found
- bugfix: So3DEventCB does not (correctly) treat event only as handled
  if callback returns true. also added logic to StbWinManager::messageFilterCB
  to correctly return whether event was handled or not
- added support for world coordinate offsets to VirtualOffsetFilter
  added support for a source offset (using world coodinate option)
  to TrackerBuilder
  changed start script to offset tracker origin to convenient space
  changed default position of various windows and SoWindowKit::defaultWindow()
  to origin - now windows should appear at convenient location independent
  of display if tracker origin is set appropriately
- reduced mem copying of tracker state for improved performance:
  changed lenth of server and station name in StationState to short (8) bytes
  changed several tracker classes (Tracker, BaseNetworkTracker, NetworkTracker,
  DualFilter, ButtonFilter, MergeFilter) 
- added Splechtna's getEyePositionLeft|Right() functions to viewer classes
  changed Wstudierstube to use these functions in getMiddleEyePos()
- performance measurement:
  added TimerUtility class to utils for performance measurements
  added timers to SoStudierstubeViewer and Stb3DEventGenerator
  added --timing flag to Workspace to acticate timing output
- added "animal" demo - paint a cow!
- again update from Rainer - several small viewer changes
- added ivio util functions with "path" option
- added latest trackerserver 2.01 from roman (with polhemus support)
  bugfix: always use number of trackers as specified by user if using
  flexible tracker server, as the FlexibleTrackerServer class does not
  correctly compute it (although it could)
- SoWindowContext crashes at VRC
  --> added workaround "-D WINDOWCONTEXTBUG" to Makefile.include
      and modified SoStudierstubeContext, SoContextSwitch accordingly
- ported landscape to use WStudierstube
  NOT QUITE WORKING YET!

-----
gerd, 2000-02-01 - changes for version 1.3beta
-----
- integrated new viewer classes
- added --pixelformat (NT only. use this option to force a pixelformat)
- modified landscaping application
- included calibration application
- ported calibration app. to NT
- fixed multi-user problems
- various bug fixes

-----
dieter, 1999-10-21 - changes for version 1.23
-----
- fixed cast problem in widget classes which created lots of warning
  with MIPSPro 7.3.1
- changed include to be a link to src
- massive changes to directory structure and makefiles
  utils are made part of stbapi/libstbapi
  only one apps dir for all 1.1-apps,wsapps,demos, examples
  only one makefile in src/ dir - use "make" to make library, "make apps"
  to make apps & examples
- created tracker hierarchy for flexible tracker configurations
  new classes for ultratrak etc.
  roman rath's new tracker protocol client will be built on this work
- SoTrakEngine
  - added SoTrakEngine::setTracker()
  - added call to setTracker in workspace.cxx main
  - removed mouseEmu
  - remove calibration (now in UndistortionFilter)
  - streamlined implementation in various places

------------------------------end of version 1.22-------------------------

-----
peci, 1999-09-08
-----
- created context classes
- modified workspace.cxx to set the new state elements

-----
Dieter & Gerd, 1999-09-03
-----
- created distribution version 1.21 as today's code snapshot
- created stbapi121_19990903.zip

-----
Dieter, 1999-09-02
-----
- moved declaration of global var <running> from workspace.cxx to 
  SoWindowKit.cxx as it is used there and must be part of the library
-----
Dieter, 1999-09-01
-----
* modified studierstube.cxx and landscaping files pen.iv, pip.iv,
  landscape.iv to reflect minor changes made in Tuebingen
  including a bug fix - Octane needs transparency set to SCREENDOOR
  to work properly.

-----
Gerds, 1999-08-25
-----
* modified Studierstube to support:
+ TGS OpenInventor 2.5 (IRIX) and 2.52 (WinNT)
+ MIPSpro 7.3.1m Compiler (IRIX)
+ MS Visual C++ 6.0 with SP3
* complete NT port (except SoTableViewer)

* changes in widgets' SoGetBoundingBoxAction
* added some command line options for viewer configuration
* fixed memory leaks
* fixed memory access violations
* fixed 3D window support on NT
* added src/tools directory and included a video mode set tool for NT

-----
Dieter 1999-08-07
-----
(1)
Added trackerToWorld rotation parameter to SoTableViewer::SoTableViewer()
It allows to set the way the tracker is mounted to the head from outside
(2)
Changed shutterGlassesRot default for Tuebingen tracker installation to
((-1,1,-1),2pi/2)
(3)
Fixed stupid bug in NetworkTracker.cxx that would allow buttons only on
stations 2 and 5.

-----
Dieter 1999-08-02
-----
- started changes log with stbapi 1.2 beta2

------
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================

CONTENT FROM OLD README.TXT

Studierstube Application Programmer's Interface - StbAPI 1.3beta
=================================================================

Update for Version 1.3beta:
see CHANGES.TXT
you have to switch the displaymode yourself before and after running studierstube.
see the start file in the workspace directory.
NT: see the tolls/winnormal directory (normal.cxx and 640x480.exe)

1.3beta was compiled and tested on:
SGI:
IRIX 6.5.6f, MIPSPro7.3.1.1m compiler and TGS Inventor 2.5
Intergraph:
NT4.0 SP6a, Microsoft Visual C++ 6.0 SP3 and TGS Inventor 2.523sdk-2a
If you experience any troubles on a GeForce graphics accelerator card:
Try to youse software rendering by specifying a software only pixelformat (--pixelformat integer).

Update for Version 1.23:
- Dieter and Gerd changed directory structure and Makefiles
- Dieter added tracker class hierarchy for extended tracker support
  and modified SoTrakEngine to work with new tracker objects

Update for Version 1.22:
Peci added context classes.

Update for Version 1.2final:

Studierstube 1.2final was compiled and tested on:
SGI:
IRIX 6.5.5f, MIPSPro7.3.1m compiler and TGS Inventor 2.5
Intergraph:
NT4.0 SP5, Microsoft Visual C++ 6.0 SP3 and TGS Inventor 2.52

See file CHANGES.TXT for update information.

Do not forget to setup TGS Inventor correctly. The Makefiles on SGI assume
that OIVHOME is set.

Update for Version 1.2b2

Changed all makefiles for better maintainability. In the file 
Makefile.include we have added the following definitions:

STB_DIR = /usr/cg/projects/VR/studierstube/
STB_BIN_DIR = $(STB_DIR)bin/
STB_INC_DIR = $(STB_DIR)include/
STB_LIB_DIR = $(STB_DIR)lib/
STB_SRC_DIR = $(STB_DIR)src/

STB_STD_INCLUDES = -I./ -I$(STB_INC_DIR)

You only have to change the STB_DIR to the directory where the
zip has been extracted. All makefiles will then be working on the
correct directories. 

Again, there habve been some major improvements and bugfixes in the
workspace. Now it should run pretty stable. Also, there are some more
demo applications. You will find the binaries in bin/wsapps and 
bin/examples.


This zip-file contains all source and include files of the StbAPI 1.2b2
dated 1999-05-28

--.--.--.--.--.--.--.--.--.--.--.--.--.--.--.--.--.--.--.--.--.--.--.--

Update for Version 1.2b1

In this version, the 3d-window and the workspace classes have been added. 
These two parts can currently not be used under NT4.0. 

no more directory dependencies should occur. Change to the directory
src and call
makestbapi		for creating the stbapi 1.2 lib files
makeapps		for creating all applications, which are located
				in the bin directory

to clean all objects and binaries, enter
cleanstbapi		and
cleanapps.

The following top-level directories are available:

bin				all applications are in this directory 
include			all include files, this directory should be referenced by
				applications using the StbAPI 1.2 classes
lib				contains the lib files for the StbAPI and utils
src				source code for StbAPI classes and applications
documentation	documentation of StbAPI classes in HTML format


******************************************************************************
IRIX
******************************************************************************
In the directory studierstube/src you will additionally find the following 
files:

Makfile.include: this part is included in each Makefile and defines those
                 makefile options that are different in the various
                 environments. 

******************************************************************************
Windows NT4.0
******************************************************************************

IMPORTANT:
Site-specific defines (e.g. STB_VIENNA_AR) need to be configured in every
workspace file!

StbAPI:
In the directory studierstube/src/stbapi you will find the following files:
StbAPI.mak ... Microsoft Visual C++ 4.2 makefile
StbAPI.mdp ... Microsoft Visual C++ 4.2 workspace
Use the workspace file for compiling.

Util:
Same as above. In studierstube/src/util you will find util.mak and util.mdp.

Landscaping Application:
Sama as above. In studierstube/src/apps/landscaping you will find
landscaping.mak and landscaping.mdp.


This version of the StbAPI 1.1 has been compiled on:
SGI: IRIX 6.5.2f, compiler version 7.2.1.2m, Inventor 2.1.2 (!)
Intergraph: Windows NT4.0, Microsoft Visual C++ 4.2, TGS OpenInventor 2.2.1 (!)

Contact: Dieter Schmalstieg (dieter@cg.tuwien.ac.at)

