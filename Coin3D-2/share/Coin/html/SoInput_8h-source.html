<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SoInput.h Source File</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
</head><body><table width="100%">
<tr>
  <td>
    <img src="Coin_logo.png" alt="Coin Logo">
  </td>
  <td align="right">
    <a href="http://www.sim.no">http://www.sim.no</a><br>
    <a href="http://www.coin3d.org/">http://www.coin3d.org</a>
  </td>
</tr>
</table>
<hr noshade>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>SoInput.h</h1><pre class="fragment"><div>00001 <span class="preprocessor">#ifndef COIN_SOINPUT_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define COIN_SOINPUT_H</span>
00003 <span class="preprocessor"></span>
00004 <span class="comment">/**************************************************************************\</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> *  This file is part of the Coin 3D visualization library.</span>
00007 <span class="comment"> *  Copyright (C) 1998-2004 by Systems in Motion.  All rights reserved.</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> *  This library is free software; you can redistribute it and/or</span>
00010 <span class="comment"> *  modify it under the terms of the GNU General Public License</span>
00011 <span class="comment"> *  ("GPL") version 2 as published by the Free Software Foundation.</span>
00012 <span class="comment"> *  See the file LICENSE.GPL at the root directory of this source</span>
00013 <span class="comment"> *  distribution for additional information about the GNU GPL.</span>
00014 <span class="comment"> *</span>
00015 <span class="comment"> *  For using Coin with software that can not be combined with the GNU</span>
00016 <span class="comment"> *  GPL, and for taking advantage of the additional benefits of our</span>
00017 <span class="comment"> *  support services, please contact Systems in Motion about acquiring</span>
00018 <span class="comment"> *  a Coin Professional Edition License.</span>
00019 <span class="comment"> *</span>
00020 <span class="comment"> *  See &lt;URL:http://www.coin3d.org/&gt; for more information.</span>
00021 <span class="comment"> *</span>
00022 <span class="comment"> *  Systems in Motion, Teknobyen, Abels Gate 5, 7030 Trondheim, NORWAY.</span>
00023 <span class="comment"> *  &lt;URL:http://www.sim.no/&gt;.</span>
00024 <span class="comment"> *</span>
00025 <span class="comment">\**************************************************************************/</span>
00026 
00027 <span class="preprocessor">#include &lt;Inventor/system/inttypes.h&gt;</span>
00028 <span class="preprocessor">#include &lt;Inventor/SbBasic.h&gt;</span>
00029 <span class="preprocessor">#include &lt;Inventor/SbDict.h&gt;</span>
00030 <span class="preprocessor">#include &lt;Inventor/lists/SbList.h&gt;</span>
00031 <span class="preprocessor">#include &lt;stdio.h&gt;</span> <span class="comment">// FILE</span>
00032 <span class="preprocessor">#ifndef COIN_INTERNAL</span>
00033 <span class="preprocessor"></span> <span class="comment">// For Open Inventor compatibility.</span>
00034 <span class="preprocessor"> #include &lt;Inventor/SoDB.h&gt;</span>
00035 <span class="preprocessor">#endif // COIN_INTERNAL</span>
00036 <span class="preprocessor"></span>
00037 <span class="keyword">class </span><a class="code" href="classSoBase.html">SoBase</a>;
00038 <span class="keyword">class </span><a class="code" href="classSbString.html">SbString</a>;
00039 <span class="keyword">class </span><a class="code" href="classSbTime.html">SbTime</a>;
00040 <span class="keyword">class </span><a class="code" href="classSbName.html">SbName</a>;
00041 <span class="keyword">class </span><a class="code" href="classSbStringList.html">SbStringList</a>;
00042 <span class="keyword">class </span>SoInput_FileInfo;
00043 <span class="keyword">class </span>SoProto;
00044 <span class="keyword">class </span><a class="code" href="classSoField.html">SoField</a>;
00045 <span class="keyword">class </span><a class="code" href="classSoFieldContainer.html">SoFieldContainer</a>;
00046 
<a name="l00047"></a><a class="code" href="classSoInput.html">00047</a> <span class="keyword">class </span>COIN_DLL_API SoInput {
00048 <span class="keyword">public</span>:
00049   SoInput(<span class="keywordtype">void</span>);
00050   SoInput(SoInput * dictIn);
00051 
00052   SoProto * findProto(<span class="keyword">const</span> <a class="code" href="classSbName.html">SbName</a> &amp; name);
00053   <span class="keywordtype">void</span> addProto(SoProto * proto);
00054   <span class="keywordtype">void</span> pushProto(SoProto * proto);
00055   SoProto * getCurrentProto(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00056   <span class="keywordtype">void</span> popProto(<span class="keywordtype">void</span>);
00057 
00058   <span class="keywordtype">void</span> addRoute(<span class="keyword">const</span> <a class="code" href="classSbName.html">SbName</a> &amp; fromnode, <span class="keyword">const</span> <a class="code" href="classSbName.html">SbName</a> &amp; fromfield,
00059                 <span class="keyword">const</span> <a class="code" href="classSbName.html">SbName</a> &amp; tonode, <span class="keyword">const</span> <a class="code" href="classSbName.html">SbName</a> &amp; tofield);
00060   SbBool checkISReference(<a class="code" href="classSoFieldContainer.html">SoFieldContainer</a> * container, <span class="keyword">const</span> <a class="code" href="classSbName.html">SbName</a> &amp; fieldname, 
00061                           SbBool &amp; readok);
00062   
00063   <span class="keyword">virtual</span> ~SoInput(<span class="keywordtype">void</span>);
00064 
00065   <span class="keyword">virtual</span> <span class="keywordtype">void</span> setFilePointer(FILE * newFP);
00066   <span class="keyword">virtual</span> SbBool openFile(<span class="keyword">const</span> <span class="keywordtype">char</span> * fileName, SbBool okIfNotFound = FALSE);
00067   <span class="keyword">virtual</span> SbBool pushFile(<span class="keyword">const</span> <span class="keywordtype">char</span> * fileName);
00068   <span class="keyword">virtual</span> <span class="keywordtype">void</span> closeFile(<span class="keywordtype">void</span>);
00069   <span class="keyword">virtual</span> SbBool isValidFile(<span class="keywordtype">void</span>);
00070   <span class="keyword">virtual</span> SbBool isValidBuffer(<span class="keywordtype">void</span>);
00071   <span class="keyword">virtual</span> FILE * getCurFile(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00072   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * getCurFileName(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00073   <span class="keyword">virtual</span> <span class="keywordtype">void</span> setBuffer(<span class="keywordtype">void</span> * bufpointer, size_t bufsize);
00074           <span class="keywordtype">void</span> setStringArray(<span class="keyword">const</span> <span class="keywordtype">char</span> * strings[]);
00075   <span class="keyword">virtual</span> size_t getNumBytesRead(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00076   <span class="keyword">virtual</span> <a class="code" href="classSbString.html">SbString</a> getHeader(<span class="keywordtype">void</span>);
00077   <span class="keyword">virtual</span> <span class="keywordtype">float</span> getIVVersion(<span class="keywordtype">void</span>);
00078   <span class="keyword">virtual</span> SbBool isBinary(<span class="keywordtype">void</span>);
00079 
00080   <span class="keyword">virtual</span> SbBool get(<span class="keywordtype">char</span> &amp; c);
00081   <span class="keyword">virtual</span> SbBool getASCIIBuffer(<span class="keywordtype">char</span> &amp; c);
00082   <span class="keyword">virtual</span> SbBool getASCIIFile(<span class="keywordtype">char</span> &amp; c);
00083   <span class="keyword">virtual</span> SbBool readHex(uint32_t &amp; l);
00084   <span class="keyword">virtual</span> SbBool read(<span class="keywordtype">char</span> &amp; c);
00085   <span class="keyword">virtual</span> SbBool read(<span class="keywordtype">char</span> &amp; c, SbBool skip);
00086   <span class="keyword">virtual</span> SbBool read(<a class="code" href="classSbString.html">SbString</a> &amp; s);
00087   <span class="keyword">virtual</span> SbBool read(<a class="code" href="classSbName.html">SbName</a> &amp; n, SbBool validIdent = FALSE);
00088   <span class="keyword">virtual</span> SbBool read(<span class="keywordtype">int</span> &amp; i);
00089   <span class="keyword">virtual</span> SbBool read(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp; i);
00090   <span class="keyword">virtual</span> SbBool read(<span class="keywordtype">short</span> &amp; s);
00091   <span class="keyword">virtual</span> SbBool read(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> &amp; s);
00092   <span class="keyword">virtual</span> SbBool read(<span class="keywordtype">float</span> &amp; f);
00093   <span class="keyword">virtual</span> SbBool read(<span class="keywordtype">double</span> &amp; d);
00094   <span class="keyword">virtual</span> SbBool readBinaryArray(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * c, <span class="keywordtype">int</span> length);
00095   <span class="keyword">virtual</span> SbBool readBinaryArray(int32_t * l, <span class="keywordtype">int</span> length);
00096   <span class="keyword">virtual</span> SbBool readBinaryArray(<span class="keywordtype">float</span> * f, <span class="keywordtype">int</span> length);
00097   <span class="keyword">virtual</span> SbBool readBinaryArray(<span class="keywordtype">double</span> * d, <span class="keywordtype">int</span> length);
00098   <span class="keyword">virtual</span> SbBool eof(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00099 
00100   SbBool isFileVRML1(<span class="keywordtype">void</span>);
00101   SbBool isFileVRML2(<span class="keywordtype">void</span>);
00102   <span class="keyword">virtual</span> <span class="keywordtype">void</span> resetFilePointer(FILE * fptr);
00103 
00104   <span class="keyword">virtual</span> <span class="keywordtype">void</span> getLocationString(<a class="code" href="classSbString.html">SbString</a> &amp; string) <span class="keyword">const</span>;
00105   <span class="keyword">virtual</span> <span class="keywordtype">void</span> putBack(<span class="keyword">const</span> <span class="keywordtype">char</span> c);
00106   <span class="keyword">virtual</span> <span class="keywordtype">void</span> putBack(<span class="keyword">const</span> <span class="keywordtype">char</span> * str);
00107   <span class="keyword">virtual</span> <span class="keywordtype">void</span> addReference(<span class="keyword">const</span> <a class="code" href="classSbName.html">SbName</a> &amp; name, <a class="code" href="classSoBase.html">SoBase</a> * base,
00108                             SbBool addToGlobalDict = TRUE);
00109   <span class="keyword">virtual</span> <span class="keywordtype">void</span> removeReference(<span class="keyword">const</span> <a class="code" href="classSbName.html">SbName</a> &amp; name);
00110   <span class="keyword">virtual</span> <a class="code" href="classSoBase.html">SoBase</a> * findReference(<span class="keyword">const</span> <a class="code" href="classSbName.html">SbName</a> &amp; name) <span class="keyword">const</span>;
00111 
00112   <span class="keyword">static</span> <span class="keywordtype">void</span> addDirectoryFirst(<span class="keyword">const</span> <span class="keywordtype">char</span> * dirName);
00113   <span class="keyword">static</span> <span class="keywordtype">void</span> addDirectoryLast(<span class="keyword">const</span> <span class="keywordtype">char</span> * dirName);
00114   <span class="keyword">static</span> <span class="keywordtype">void</span> addEnvDirectoriesFirst(<span class="keyword">const</span> <span class="keywordtype">char</span> * envVarName,
00115                                      <span class="keyword">const</span> <span class="keywordtype">char</span> * separator = <span class="stringliteral">":\t "</span>);
00116   <span class="keyword">static</span> <span class="keywordtype">void</span> addEnvDirectoriesLast(<span class="keyword">const</span> <span class="keywordtype">char</span> * envVarName,
00117                                     <span class="keyword">const</span> <span class="keywordtype">char</span> * separator = <span class="stringliteral">":\t "</span>);
00118   <span class="keyword">static</span> <span class="keywordtype">void</span> removeDirectory(<span class="keyword">const</span> <span class="keywordtype">char</span> * dirName);
00119   <span class="keyword">static</span> <span class="keywordtype">void</span> clearDirectories(<span class="keywordtype">void</span>);
00120   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classSbStringList.html">SbStringList</a> &amp; getDirectories(<span class="keywordtype">void</span>);
00121 
00122   <span class="keyword">static</span> <span class="keywordtype">void</span> init(<span class="keywordtype">void</span>);
00123 
00124   <span class="keyword">static</span> <a class="code" href="classSbString.html">SbString</a> getPathname(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> filename);
00125   <span class="keyword">static</span> <a class="code" href="classSbString.html">SbString</a> getPathname(<span class="keyword">const</span> <a class="code" href="classSbString.html">SbString</a> &amp; s);
00126   <span class="keyword">static</span> <a class="code" href="classSbString.html">SbString</a> getBasename(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> filename);
00127   <span class="keyword">static</span> <a class="code" href="classSbString.html">SbString</a> getBasename(<span class="keyword">const</span> <a class="code" href="classSbString.html">SbString</a> &amp; s);
00128 
00129   <span class="keyword">static</span> <a class="code" href="classSbString.html">SbString</a> searchForFile(<span class="keyword">const</span> <a class="code" href="classSbString.html">SbString</a> &amp; basename,
00130                                 <span class="keyword">const</span> <a class="code" href="classSbStringList.html">SbStringList</a> &amp; directories,
00131                                 <span class="keyword">const</span> <a class="code" href="classSbStringList.html">SbStringList</a> &amp; subdirectories);
00132 
00133 
00134 <span class="keyword">protected</span>:
00135   <span class="keyword">virtual</span> SbBool popFile(<span class="keywordtype">void</span>);
00136   <span class="keywordtype">void</span> setIVVersion(<span class="keywordtype">float</span> version);
00137   FILE * findFile(<span class="keyword">const</span> <span class="keywordtype">char</span> * fileName, <a class="code" href="classSbString.html">SbString</a> &amp; fullName);
00138   <span class="keywordtype">void</span> initFile(FILE * newFP, <span class="keyword">const</span> <span class="keywordtype">char</span> * fileName, <a class="code" href="classSbString.html">SbString</a> * fullName,
00139                 SbBool openedHere, <a class="code" href="classSbDict.html">SbDict</a> * refDict = (<a class="code" href="classSbDict.html">SbDict</a> *) NULL);
00140   SbBool checkHeader(SbBool bValidateBufferHeader = FALSE);
00141   SbBool fromBuffer(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00142   SbBool skipWhiteSpace(<span class="keywordtype">void</span>);
00143   size_t freeBytesInBuf(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00144   SbBool readInteger(int32_t &amp; l);
00145   SbBool readUnsignedInteger(uint32_t &amp; l);
00146   SbBool readReal(<span class="keywordtype">double</span> &amp; d);
00147   SbBool readUnsignedIntegerString(<span class="keywordtype">char</span> * str);
00148   <span class="keywordtype">int</span> readDigits(<span class="keywordtype">char</span> * str);
00149   <span class="keywordtype">int</span> readHexDigits(<span class="keywordtype">char</span> * str);
00150   <span class="keywordtype">int</span> readChar(<span class="keywordtype">char</span> * str, <span class="keywordtype">char</span> charToRead);
00151 
00152   SbBool makeRoomInBuf(size_t nBytes);
00153   <span class="keywordtype">void</span> convertShort(<span class="keywordtype">char</span> * from, <span class="keywordtype">short</span> * s);
00154   <span class="keywordtype">void</span> convertInt32(<span class="keywordtype">char</span> * from, int32_t * l);
00155   <span class="keywordtype">void</span> convertFloat(<span class="keywordtype">char</span> * from, <span class="keywordtype">float</span> * f);
00156   <span class="keywordtype">void</span> convertDouble(<span class="keywordtype">char</span> * from, <span class="keywordtype">double</span> * d);
00157   <span class="keywordtype">void</span> convertShortArray(<span class="keywordtype">char</span> * from, <span class="keywordtype">short</span> * to, <span class="keywordtype">int</span> len);
00158   <span class="keywordtype">void</span> convertInt32Array(<span class="keywordtype">char</span> * from, int32_t * to, <span class="keywordtype">int</span> len);
00159   <span class="keywordtype">void</span> convertFloatArray(<span class="keywordtype">char</span> * from, <span class="keywordtype">float</span> * to, <span class="keywordtype">int</span> len);
00160   <span class="keywordtype">void</span> convertDoubleArray(<span class="keywordtype">char</span> * from, <span class="keywordtype">double</span> * to, <span class="keywordtype">int</span> len);
00161   SbBool isFileURL(<span class="keyword">const</span> <span class="keywordtype">char</span> * url);
00162   <span class="keywordtype">char</span> * URLToFile(<span class="keywordtype">char</span> * out_buf, <span class="keyword">const</span> <span class="keywordtype">char</span> * in_buf);
00163   SbBool IsURL(<span class="keyword">const</span> <span class="keywordtype">char</span> * c_strng);
00164 
00165   <span class="keyword">static</span> <span class="keywordtype">void</span> setDirectories(<a class="code" href="classSbStringList.html">SbStringList</a> * dirs);
00166 
00167 <span class="keyword">private</span>:
00168   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classSoDB.html">SoDB</a>;
00169   <span class="keyword">friend</span> <span class="keyword">class </span>SoInputP;
00170 
00171   <span class="keyword">static</span> <span class="keywordtype">void</span> clean(<span class="keywordtype">void</span>);
00172   <span class="keywordtype">void</span> constructorsCommon(<span class="keywordtype">void</span>);
00173 
00174   <span class="keyword">static</span> <span class="keywordtype">void</span> addDirectoryIdx(<span class="keyword">const</span> <span class="keywordtype">int</span> idx, <span class="keyword">const</span> <span class="keywordtype">char</span> * dirName);
00175   <span class="keyword">static</span> <span class="keywordtype">void</span> addEnvDirectoriesIdx(<span class="keywordtype">int</span> startidx, <span class="keyword">const</span> <span class="keywordtype">char</span> * envVarName,
00176                                    <span class="keyword">const</span> <span class="keywordtype">char</span> * separator);
00177   <span class="keyword">static</span> <a class="code" href="classSbStringList.html">SbStringList</a> * dirsearchlist;
00178 
00179   <a class="code" href="classSbList.html">SbList&lt;SoInput_FileInfo *&gt;</a> filestack;
00180   SoInput_FileInfo * getTopOfStack(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00181 
00182   SbDict refdict;
00183 };
00184 
00185 <span class="preprocessor">#endif // !COIN_SOINPUT_H</span>
</div></pre><hr noshade>
<p align="right">Copyright &copy 1998-2004 by <a href="http://www.sim.no">Systems in Motion AS</a>. All rights reserved.</p>
<address style="align: right;"><small>
Generated on Mon Oct 18 01:24:27 2004 for Coin by <a href="http://www.doxygen.org/index.html">Doxygen.</a> 1.3.7</small></address>
</body>
</html>
