<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SoOutput.h Source File</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
</head><body><table width="100%">
<tr>
  <td>
    <img src="Coin_logo.png" alt="Coin Logo">
  </td>
  <td align="right">
    <a href="http://www.sim.no">http://www.sim.no</a><br>
    <a href="http://www.coin3d.org/">http://www.coin3d.org</a>
  </td>
</tr>
</table>
<hr noshade>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>SoOutput.h</h1><pre class="fragment"><div>00001 <span class="preprocessor">#ifndef COIN_SOOUTPUT_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define COIN_SOOUTPUT_H</span>
00003 <span class="preprocessor"></span>
00004 <span class="comment">/**************************************************************************\</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> *  This file is part of the Coin 3D visualization library.</span>
00007 <span class="comment"> *  Copyright (C) 1998-2004 by Systems in Motion.  All rights reserved.</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> *  This library is free software; you can redistribute it and/or</span>
00010 <span class="comment"> *  modify it under the terms of the GNU General Public License</span>
00011 <span class="comment"> *  ("GPL") version 2 as published by the Free Software Foundation.</span>
00012 <span class="comment"> *  See the file LICENSE.GPL at the root directory of this source</span>
00013 <span class="comment"> *  distribution for additional information about the GNU GPL.</span>
00014 <span class="comment"> *</span>
00015 <span class="comment"> *  For using Coin with software that can not be combined with the GNU</span>
00016 <span class="comment"> *  GPL, and for taking advantage of the additional benefits of our</span>
00017 <span class="comment"> *  support services, please contact Systems in Motion about acquiring</span>
00018 <span class="comment"> *  a Coin Professional Edition License.</span>
00019 <span class="comment"> *</span>
00020 <span class="comment"> *  See &lt;URL:http://www.coin3d.org/&gt; for more information.</span>
00021 <span class="comment"> *</span>
00022 <span class="comment"> *  Systems in Motion, Teknobyen, Abels Gate 5, 7030 Trondheim, NORWAY.</span>
00023 <span class="comment"> *  &lt;URL:http://www.sim.no/&gt;.</span>
00024 <span class="comment"> *</span>
00025 <span class="comment">\**************************************************************************/</span>
00026 
00027 <span class="preprocessor">#include &lt;Inventor/system/inttypes.h&gt;</span>
00028 <span class="preprocessor">#include &lt;Inventor/SbBasic.h&gt;</span>
00029 <span class="preprocessor">#include &lt;Inventor/SbString.h&gt;</span>
00030 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00031 
00032 <span class="keyword">class </span><a class="code" href="classSbDict.html">SbDict</a>;
00033 <span class="keyword">class </span><a class="code" href="classSbName.html">SbName</a>;
00034 <span class="keyword">class </span><a class="code" href="classSoBase.html">SoBase</a>;
00035 <span class="keyword">class </span>SoOutputP;
00036 <span class="keyword">class </span>SoProto;
00037 <span class="keyword">class </span><a class="code" href="classSoField.html">SoField</a>;
00038 <span class="keyword">class </span><a class="code" href="classSoFieldContainer.html">SoFieldContainer</a>;
00039 
00040 <span class="keyword">typedef</span> <span class="keywordtype">void</span> * SoOutputReallocCB(<span class="keywordtype">void</span> * ptr, size_t newSize);
00041 
<a name="l00042"></a><a class="code" href="classSoOutput.html">00042</a> <span class="keyword">class </span>COIN_DLL_API SoOutput {
00043 <span class="keyword">public</span>:
<a name="l00044"></a><a class="code" href="classSoOutput.html#w4">00044</a>   <span class="keyword">enum</span> Stage { COUNT_REFS, WRITE };
00045   <span class="comment">// Bitwise flags for the annotations.</span>
<a name="l00046"></a><a class="code" href="classSoOutput.html#w5">00046</a>   <span class="keyword">enum</span> Annotations { ADDRESSES = 0x01, REF_COUNTS = 0x02 };
00047 
00048   SoOutput(<span class="keywordtype">void</span>);
00049   SoOutput(SoOutput * dictOut);
00050   <span class="keyword">virtual</span> ~SoOutput();
00051 
00052   <span class="keyword">virtual</span> <span class="keywordtype">void</span> setFilePointer(FILE * newFP);
00053   <span class="keyword">virtual</span> FILE * getFilePointer(<span class="keywordtype">void</span>) const;
00054   virtual SbBool openFile(const <span class="keywordtype">char</span> * const fileName);
00055   virtual <span class="keywordtype">void</span> closeFile(<span class="keywordtype">void</span>);
00056 
00057   SbBool setCompression(const <a class="code" href="classSbName.html">SbName</a> &amp; compmethod,
00058                         const <span class="keywordtype">float</span> level = 0.5f);
00059   static const <a class="code" href="classSbName.html">SbName</a> * getAvailableCompressionMethods(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp; num);
00060 
00061   virtual <span class="keywordtype">void</span> setBuffer(<span class="keywordtype">void</span> * bufPointer, size_t initSize,
00062                          SoOutputReallocCB * reallocFunc, int32_t offset = 0);
00063   virtual SbBool getBuffer(<span class="keywordtype">void</span> * &amp; bufPointer, size_t &amp; nBytes) const;
00064   virtual size_t getBufferSize(<span class="keywordtype">void</span>) const;
00065   virtual <span class="keywordtype">void</span> resetBuffer(<span class="keywordtype">void</span>);
00066   virtual <span class="keywordtype">void</span> setBinary(const SbBool flag);
00067   virtual SbBool isBinary(<span class="keywordtype">void</span>) const;
00068   virtual <span class="keywordtype">void</span> setHeaderString(const <a class="code" href="classSbString.html">SbString</a> &amp; str);
00069   virtual <span class="keywordtype">void</span> resetHeaderString(<span class="keywordtype">void</span>);
00070   virtual <span class="keywordtype">void</span> setFloatPrecision(const <span class="keywordtype">int</span> precision);
00071 
00072   <span class="keywordtype">void</span> setStage(Stage stage);
00073   Stage getStage(<span class="keywordtype">void</span>) const;
00074 
00075   <span class="keywordtype">void</span> incrementIndent(const <span class="keywordtype">int</span> levels = 1);
00076   <span class="keywordtype">void</span> decrementIndent(const <span class="keywordtype">int</span> levels = 1);
00077 
00078   virtual <span class="keywordtype">void</span> write(const <span class="keywordtype">char</span> c);
00079   virtual <span class="keywordtype">void</span> write(const <span class="keywordtype">char</span> * s);
00080   virtual <span class="keywordtype">void</span> write(const <a class="code" href="classSbString.html">SbString</a> &amp; s);
00081   virtual <span class="keywordtype">void</span> write(const <a class="code" href="classSbName.html">SbName</a> &amp; n);
00082   virtual <span class="keywordtype">void</span> write(const <span class="keywordtype">int</span> i);
00083   virtual <span class="keywordtype">void</span> write(const <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i);
00084   virtual <span class="keywordtype">void</span> write(const <span class="keywordtype">short</span> s);
00085   virtual <span class="keywordtype">void</span> write(const <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> s);
00086   virtual <span class="keywordtype">void</span> write(const <span class="keywordtype">float</span> f);
00087   virtual <span class="keywordtype">void</span> write(const <span class="keywordtype">double</span> d);
00088   virtual <span class="keywordtype">void</span> writeBinaryArray(const <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * c, const <span class="keywordtype">int</span> length);
00089   virtual <span class="keywordtype">void</span> writeBinaryArray(const int32_t * const l, const <span class="keywordtype">int</span> length);
00090   virtual <span class="keywordtype">void</span> writeBinaryArray(const <span class="keywordtype">float</span> * const f, const <span class="keywordtype">int</span> length);
00091   virtual <span class="keywordtype">void</span> writeBinaryArray(const <span class="keywordtype">double</span> * const d, const <span class="keywordtype">int</span> length);
00092 
00093   virtual <span class="keywordtype">void</span> indent(<span class="keywordtype">void</span>);
00094   virtual <span class="keywordtype">void</span> reset(<span class="keywordtype">void</span>);
00095   <span class="keywordtype">void</span> setCompact(SbBool flag);
00096   SbBool isCompact(<span class="keywordtype">void</span>) const;
00097   <span class="keywordtype">void</span> setAnnotation(uint32_t bits);
00098   uint32_t getAnnotation(<span class="keywordtype">void</span>);
00099 
00100   static <a class="code" href="classSbString.html">SbString</a> getDefaultASCIIHeader(<span class="keywordtype">void</span>);
00101   static <a class="code" href="classSbString.html">SbString</a> getDefaultBinaryHeader(<span class="keywordtype">void</span>);
00102 
00103   <span class="keywordtype">int</span> addReference(const <a class="code" href="classSoBase.html">SoBase</a> * base);
00104   <span class="keywordtype">int</span> findReference(const <a class="code" href="classSoBase.html">SoBase</a> * base) const;
00105   <span class="keywordtype">void</span> setReference(const <a class="code" href="classSoBase.html">SoBase</a> * base, <span class="keywordtype">int</span> refid);
00106 
00107   <span class="keywordtype">void</span> addDEFNode(<a class="code" href="classSbName.html">SbName</a> name);
00108   SbBool lookupDEFNode(<a class="code" href="classSbName.html">SbName</a> name);
00109   <span class="keywordtype">void</span> removeDEFNode(<a class="code" href="classSbName.html">SbName</a> name);
00110 
00111   <span class="keywordtype">void</span> pushProto(SoProto * proto);
00112   SoProto * getCurrentProto(<span class="keywordtype">void</span>) const;
00113   <span class="keywordtype">void</span> popProto(<span class="keywordtype">void</span>);
00114   
00115   <span class="keywordtype">void</span> addRoute(<a class="code" href="classSoFieldContainer.html">SoFieldContainer</a> * from, const <a class="code" href="classSbName.html">SbName</a> &amp; fromfield,
00116                 <a class="code" href="classSoFieldContainer.html">SoFieldContainer</a> * to, const <a class="code" href="classSbName.html">SbName</a> &amp; tofield);
00117   <span class="keywordtype">void</span> resolveRoutes(<span class="keywordtype">void</span>);
00118   
00119 protected:
00120   SbBool isToBuffer(<span class="keywordtype">void</span>) const;
00121   size_t bytesInBuf(<span class="keywordtype">void</span>) const;
00122   SbBool makeRoomInBuf(size_t nBytes);
00123   <span class="keywordtype">void</span> convertShort(<span class="keywordtype">short</span> s, <span class="keywordtype">char</span> * to);
00124   <span class="keywordtype">void</span> convertInt32(int32_t l, <span class="keywordtype">char</span> * to);
00125   <span class="keywordtype">void</span> convertFloat(<span class="keywordtype">float</span> f, <span class="keywordtype">char</span> * to);
00126   <span class="keywordtype">void</span> convertDouble(<span class="keywordtype">double</span> d, <span class="keywordtype">char</span> * to);
00127   <span class="keywordtype">void</span> convertShortArray(<span class="keywordtype">short</span> * from, <span class="keywordtype">char</span> * to, <span class="keywordtype">int</span> len);
00128   <span class="keywordtype">void</span> convertInt32Array(int32_t * from, <span class="keywordtype">char</span> * to, <span class="keywordtype">int</span> len);
00129   <span class="keywordtype">void</span> convertFloatArray(<span class="keywordtype">float</span> * from, <span class="keywordtype">char</span> * to, <span class="keywordtype">int</span> len);
00130   <span class="keywordtype">void</span> convertDoubleArray(<span class="keywordtype">double</span> * from, <span class="keywordtype">char</span> * to, <span class="keywordtype">int</span> len);
00131 
00132   static <a class="code" href="classSbString.html">SbString</a> padHeader(const <a class="code" href="classSbString.html">SbString</a> &amp; inString);
00133 
00134   SbBool wroteHeader;
00135 
00136 private:
00137   SoOutputP * pimpl;
00138 
00139   <span class="keywordtype">void</span> constructorCommon(<span class="keywordtype">void</span>);
00140 
00141   <span class="keywordtype">void</span> checkHeader(<span class="keywordtype">void</span>);
00142   <span class="keywordtype">void</span> writeBytesWithPadding(const <span class="keywordtype">char</span> * const p, const size_t nr);
00143   
00144   friend class <a class="code" href="classSoBase.html">SoBase</a>; <span class="comment">// Need to be able to remove items from dict.</span>
00145   <span class="keywordtype">void</span> removeSoBase2IdRef(const SoBase * base);
00146 };
00147 
00148 #endif <span class="comment">// !COIN_SOOUTPUT_H</span>
</div></pre><hr noshade>
<p align="right">Copyright &copy 1998-2004 by <a href="http://www.sim.no">Systems in Motion AS</a>. All rights reserved.</p>
<address style="align: right;"><small>
Generated on Mon Oct 18 01:24:29 2004 for Coin by <a href="http://www.doxygen.org/index.html">Doxygen.</a> 1.3.7</small></address>
</body>
</html>
